$(document).ready(function () {
  console.log("please be working");
  var res;
  var test = 10;
  // $.getJSON('https://jsonplaceholder.typicode.com/todos', function(data){
  //document.getElementById("json").textContent = JSON.stringify(data, undefined, 2);
  // });

  //var Web3 = require("web3");
  const web3 = new Web3("http://172.27.63.201:7545");
  //const web3 = new Web3("https://cloudflare-eth.com");

  async function getBlockNumber() {
    var j = 0;
    var latestBlockNumber = await web3.eth.getBlockNumber()
    .then(console.log)
    //.resolve(() => j = Number);
    return latestBlockNumber;
  }
  async function getNBTransInBlock(blockNumber){
    nb_trans = await web3.eth.getBlockTransactionCount(blockNumber)
    return nb_trans;
  }
  
  async function getTransaction(blockNumber, index){
    const trans = await getTransactionFromBlock(blockNumber, index);
    return trans;
  }
  

 
  var nb_trans;
  var trans;
  var nb_blocks;
  var nb_blocks_pro = getBlockNumber();
  //nb_blocks_pro.then(() => nb_blocks = Number);
  //console.log("block number = " + nb_blocks_pro);
  //var blocknumber = await web3.eth.getBlockNumber();
  console.log(nb_blocks_pro);
  for(var j = 0; j <= nb_blocks_pro; j++){
    var nb_trans_pro = getNBTransInBlock(j);
    nb_trans_pro.then((Number) => nb_trans = Number);
    console.log("nb trans = " + nb_trans);
    for(var i = 1; i <= nb_trans;j++){
      var trans_pro = getTransaction(j,i);
      trans_pro.then((Object) => trans = Object);
      console.log("blocknb = " + j + " trans index = " + i + "transaction = " + trans)
    }
  }

});


